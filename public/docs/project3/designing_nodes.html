<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Designing nodes - CMSC 341</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script> window.base_url421 = "" </script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Designing nodes | CMSC 341</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Designing nodes" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Project documentation for CMSC 341 Summer 2021 session" /> <meta property="og:description" content="Project documentation for CMSC 341 Summer 2021 session" /> <link rel="canonical" href="/docs/project3/designing_nodes.html" /> <meta property="og:url" content="/docs/project3/designing_nodes.html" /> <meta property="og:site_name" content="CMSC 341" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Designing nodes" /> <script type="application/ld+json"> {"headline":"Designing nodes","@type":"WebPage","description":"Project documentation for CMSC 341 Summer 2021 session","url":"/docs/project3/designing_nodes.html","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> CMSC 341 </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/project3/" class="nav-list-link">Project 3: B is NOT for binary</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/project3/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="/docs/project3/b-trees.html" class="nav-list-link">B-Trees</a></li><li class="nav-list-item "><a href="/docs/project3/assignment.html" class="nav-list-link">Assignment</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/project3/function_descriptions/" class="nav-list-link">Function Descriptions</a><ul class="nav-list"><li class="nav-list-item test "><a href="/docs/project3/function_descriptions/constructor.html" class="nav-list-link"> BTree::BTree</a></li><li class="nav-list-item test "><a href="/docs/project3/function_descriptions/try_add.html" class="nav-list-link"> BTree::try_add</a></li><li class="nav-list-item test "><a href="/docs/project3/function_descriptions/try_find.html" class="nav-list-link"> BTree::try_find</a></li><li class="nav-list-item test "><a href="/docs/project3/function_descriptions/try_update.html" class="nav-list-link"> BTree::try_update</a></li><li class="nav-list-item test "><a href="/docs/project3/function_descriptions/try_delete.html" class="nav-list-link"> BTree::try_delete</a></li></ul></li><li class="nav-list-item active"><a href="/docs/project3/designing_nodes.html" class="nav-list-link active">Designing nodes</a></li><li class="nav-list-item "><a href="/docs/project3/out_parameters.html" class="nav-list-link">Out parameters</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search CMSC 341" aria-label="Search CMSC 341" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/project3/">Project 3: B is NOT for binary</a></li> <li class="breadcrumb-nav-list-item"><span>Designing nodes</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1> Due by 11:59 PM on Sunday, Feb 07 </h1> <div class="hero"> <h2 class="hero-heading"> Changelog </h2> <ul> <li>February 01, 2021: Initial Version</li> </ul> </div> <h1 id="project-3-designing-nodes"> <a href="#project-3-designing-nodes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project 3: Designing nodes </h1> <h2 id="general-guidelines"> <a href="#general-guidelines" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General guidelines </h2> <p>Designing your nodes is something that needs to make sense to you and you can understand. That being said, you should try to write readable code, and not a nest of if/else and variables named <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code>. Failing that you should leave comments on <strong>why</strong> you are doing things. Comments like <code class="language-plaintext highlighter-rouge">Get child</code> don’t really help. I also recommend making small functions focusing on one thing. Take a look at the next example, and think of which is more readable. Obviously we are omitting some things here. But the more complex your code is, the more you have to gain from this!</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">TIndex</span> <span class="n">outIndex</span><span class="p">;</span>
<span class="n">TKey</span> <span class="n">key</span><span class="p">;</span>

<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">outIndex</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="n">outIndex</span> <span class="o">=</span> <span class="n">findElement</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
</code></pre></div></div> <p>Ok with that out of the way, this project is probably a <strong>good</strong> use-case of making the tree a friend of the node, so it can access private members. Yes, you can do everything in the OOP way if you want. You won’t be penalized either way.</p> <div class="alert alert-warning"> Your nodes <b>WILL</b> have to be templated on the key and index as well! </div> <h2 id="general-ideas"> <a href="#general-ideas" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General Ideas </h2> <p>B-Trees grow from the bottom up. That means you probably want to keep track of each node’s parent on top of each node’s children. Another property that might come up a lot is the height. Recall that a leaf has a height of 0. Maybe you want to keep track of it. Maybe you want to use it as a decreasing value in recursion, to detect a leaf.</p> <h2 id="design-ideas"> <a href="#design-ideas" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Design Ideas </h2> <p>Next we will go over some design ideas. Please note that this is just to get you started, and obviously doesn’t cover everything. You will have to expand on these. Also, it is VERY possible for you to come up with different designs. That is totally fine as well. Just please leave some comments on <em>how</em> your nodes work and <em>why</em>.</p> <h3 id="idea-1-single-node-class"> <a href="#idea-1-single-node-class" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Idea 1: Single Node class </h3> <p>In this design you have a single node class and you use flags to treat it as a leaf or internal node. For instance, you have a boolean to denote if the node is a leaf and every node has a vector for “items”. But the vector is populated for leaves only. This potentially wastes quite a bit of memory. You can see an example below:</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">Node</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">bool</span> <span class="n">m_IsLeaf</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TKey</span><span class="o">&gt;</span> <span class="n">m_Keys</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;*&gt;</span> <span class="n">m_Children</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TIndex</span><span class="o">&gt;</span> <span class="n">m_Data</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="idea-2-different-node-classes"> <a href="#idea-2-different-node-classes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Idea 2: Different Node classes </h3> <p>This is a simple extension to the above. In <em>my</em> opinion this only introduces more pain, over the previous idea. But remember, it is all about what makes sense to you, so you can implement it! You either have your m_Children vector populated and m_Leaves is empty, or the other way around.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">Leaf</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TIndex</span><span class="o">&gt;</span> <span class="n">m_Data</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">Node</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TKey</span><span class="o">&gt;</span> <span class="n">m_Keys</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;*&gt;</span> <span class="n">m_Children</span><span class="p">;</span> <span class="c1">// You either have these</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">LeafNode</span><span class="o">&lt;</span><span class="n">TIndex</span><span class="o">&gt;*&gt;</span> <span class="n">m_Leaves</span><span class="p">;</span> <span class="c1">// OR you either have these</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="idea-3-inheritance"> <a href="#idea-3-inheritance" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Idea 3: Inheritance! </h3> <p>This is the most “elegant” solution, but you might not feel comfortable with it. It is definitely the most OOP solution. LeafNode is a Node, so it gets access to all of its protected and public members and that adds Data on top. Furthermore we will override the behavior of <code class="language-plaintext highlighter-rouge">IsLeaf</code> so <code class="language-plaintext highlighter-rouge">m_Children[i]-&gt;IsLeaf()</code> will return true or false as expected. This is called polymorphism from your 202 class. Please note the constructors and destructors. They <strong>MUST</strong> be like that. Furthermore, <code class="language-plaintext highlighter-rouge">arguments for LeafNode</code> can include <code class="language-plaintext highlighter-rouge">arguments for Node</code>.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">Node</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TKey</span><span class="o">&gt;</span> <span class="n">m_Keys</span><span class="p">;</span>
    <span class="c1">// Children can be Node&lt;TKey, TIndex&gt; or LeafNode&lt;TKey, TIndex&gt;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;*&gt;</span> <span class="n">m_Children</span><span class="p">;</span>

<span class="nl">public:</span>
    <span class="n">Node</span><span class="p">(</span><span class="cm">/*arguments_for_node*/</span><span class="p">);</span>
    <span class="k">virtual</span> <span class="n">Node</span><span class="p">();</span>

    <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsLeaf</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">LeafNode</span><span class="o">:</span> <span class="k">public</span> <span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TIndex</span><span class="o">&gt;</span> <span class="n">m_Data</span><span class="p">;</span>
    
<span class="nl">public:</span>
    <span class="n">LeafNode</span><span class="p">(</span><span class="cm">/*arguments for LeafNode*/</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">Node</span><span class="p">(</span><span class="cm">/*arguments for Node*/</span><span class="p">)</span>
        <span class="cm">/*, other stuff for LeafNode here*/</span>
    <span class="p">{}</span>
    <span class="k">virtual</span> <span class="n">LeafNode</span><span class="p">();</span>

    <span class="c1">// Notice how we override the behavior of Node here</span>
    <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">IsLeaf</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span>  <span class="p">{</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span> 
<span class="p">};</span>
</code></pre></div></div> <h3 id="idea-4-nodes-and-entries"> <a href="#idea-4-nodes-and-entries" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Idea 4: Nodes and entries(?) </h3> <p>This idea can be combined with the rest pretty easily. Basically, your Node will have a private struct that can have keys and the next/previous link to a child. This way you can reduce the number of vectors you have to juggle around. I named the struct <code class="language-plaintext highlighter-rouge">Entry</code> because I am that imaginative. But you might want to use another name. Let’s look at a concrete example though. We will revisit this picture.</p> <p><img class="d-block my-0 mx-auto" src="/assets/images/tree-color-coded.png" alt="" /></p> <p>Let’s say that we have the first node there at the top. An entry would have a key of 12, previousBranch would be a pointer to the bottom left node, and next branch would be a pointer to the bottom middle node. The next entry would have a key of 20 and so on and so forth.</p> <p>Again this is just an idea, and might warrant a lot of refinement. For instance think of the entry when you do not have a previous or next branch.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">TIndex</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">Node</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="k">struct</span> <span class="nc">Entry</span> <span class="p">{</span>
        <span class="n">TKey</span> <span class="n">key</span><span class="p">;</span>
        <span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;*</span> <span class="n">previousBranch</span><span class="p">;</span>
        <span class="n">Node</span><span class="o">&lt;</span><span class="n">TKey</span><span class="p">,</span> <span class="n">TIndex</span><span class="o">&gt;*</span> <span class="n">nextBranch</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="n">m_Entries</span><span class="p">;</span>

<span class="nl">public:</span>

<span class="p">};</span>
</code></pre></div></div> </div> </div> <a href="#" id="search-button" class="search-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-search"></use></svg> </a> <div class="search-overlay"></div> </div> <!-- Scripts loaded after webpack compilation. We'd rather have then whole DOM before they even start loading --> </body> </html>
